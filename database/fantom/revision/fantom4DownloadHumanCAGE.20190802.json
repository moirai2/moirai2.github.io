{"https://moirai2.github.io/schema/daemon/bash":["output=$tmpdir/fantom4.humanCAGE.fq.gz","mkdir -p $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h04_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h05_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h06_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h08_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h09_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h10_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h11_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h15_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h21_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h22_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h27_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h28_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h33_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h34_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h35_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h37_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h39_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h40_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h42_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h43_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h45_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h47_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h48_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h49_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h51_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h52_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h53_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h57_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h59_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h61_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h62_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h63_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h64_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h65_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h69_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h73_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h74_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h91_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h92_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h93_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/h95ctrls_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/i02_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/download.pl http://fantom.gsc.riken.jp/4/download/Tables/human/CAGE/tag_counts/i03_tag_counts.tbl.txt.bz2 $tmpdir/download","perl $tmpdir/tagcount2fastq.pl $tmpdir/download/*_tag_counts.tbl.txt.bz2|gzip -c>$output","rm -r $tmpdir/download"],"https://moirai2.github.io/schema/daemon/script":[{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/download.pl","https://moirai2.github.io/schema/daemon/script/code":["use LWP::UserAgent;","use HTTP::Request;","use File::Basename;","my $url=shift(@ARGV);","my $outdir=shift(@ARGV);","my $agent=new LWP::UserAgent();","$agent->agent('download.pl/1.0');","$agent->timeout(10);","$agent->env_proxy;","my $request=HTTP::Request->new(GET=>$url);","my $filename=\"$outdir/\".basename($url);","my $res=$agent->request($request);","if($res->is_success){","open(OUT,\">$filename\");","print OUT $res->content;","close(OUT);","}elsif($res->is_error){","exit(1);","}"]},{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/tagcount2fastq.pl","https://moirai2.github.io/schema/daemon/script/code":["use File::Basename;","foreach my $file(@ARGV){","my $library=basename($file);","if($library=~/^(.+?)_/){$library=$1;}","open(IN,\"bzip2 -cd $file|\");","my @labels=();","while(<IN>){","chomp;","if(/^##/){next;}","@labels=split(/\\\\t/);","last;","}","shift(@labels);","pop(@labels);","foreach my $label(@labels){if($label=~/^raw\\\\.(.+)$/){$label=$1;$label=~tr/ /_/;}}","while(<IN>){","chomp;","my ($sequence,@counts)=split(/\\\\t/);","pop(@counts);","my $length=length($sequence);","my $quality=\"\";","for(my $i=0;$i<$length;$i++){$quality.=\"/\";}","for(my $i=0;$i<scalar(@counts);$i++){","my $count=$counts[$i];","if($count==0){next;}","my $label=$labels[$i];","for(my $j=0;$j<$count;$j++){","print \"\\\\@$sequence|$library|$label|\".($j+1).\"\\\\n\";","print \"$sequence\\\\n\";","print \"+\\\\n\";","print \"$quality\\\\n\";","}","}","}","close(IN);","print \"$output\\\\n\";","}"]}],"https://moirai2.github.io/schema/daemon/output":"$output"}
