{"https://moirai2.github.io/schema/daemon/input":{"$condadir":"miniconda3"},"https://moirai2.github.io/schema/daemon/bash":["url=`perl $tmpdir/url.pl`","log=$tmpdir/log.txt","mkdir -p $condadir","download=$(perl $tmpdir/download.pl $url $tmpdir)","script=`basename $download`","bash $tmpdir/$script -f -b -p $condadir>$log 2>&1","rm $tmpdir/$script","abspath=`perl $tmpdir/abspath.pl $condadir/bin/conda`","path=bin/conda","mv $tmpdir/log.txt $condadir/.","ln -s $abspath $path"],"https://moirai2.github.io/schema/daemon/script":[{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/download.pl","https://moirai2.github.io/schema/daemon/script/code":["use LWP::UserAgent;","use HTTP::Request;","use File::Basename;","my $url=shift(@ARGV);","my $outdir=shift(@ARGV);","my $agent=new LWP::UserAgent();","$agent->agent('download.pl/1.0');","$agent->timeout(10);","$agent->env_proxy;","my $request=HTTP::Request->new(GET=>$url);","my $filename=\"$outdir/\".basename($url);","my $res=$agent->request($request);","if($res->is_success){","open(OUT,\">$filename\");","print OUT $res->content;","close(OUT);","print \"$filename\\n\";","}elsif(","$res->is_error){","exit(1);","}"]},{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/url.pl","https://moirai2.github.io/schema/daemon/script/code":["my $os=`uname -s`;","chomp($os);","my $processor=`uname -m`;","chomp($processor);","if($os=~/Darwin/){$os=\"MacOSX\";}","my $suffix=($os eq \"Windows\")?\".exe\":\".sh\";","print \"https://repo.continuum.io/miniconda/Miniconda3-latest-$os-$processor$suffix\\n\";"]},{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/abspath.pl","https://moirai2.github.io/schema/daemon/script/code":["use Cwd;","print Cwd::abs_path($ARGV[0]).\"\\n\";"]}],"https://moirai2.github.io/schema/daemon/output":["$path","$log"]}
