{"https://moirai2.github.io/schema/daemon/input":{"$bindir":"bin"},"https://moirai2.github.io/schema/daemon/bash":["url=`perl $tmpdir/url.pl`","log=$tmpdir/log.txt","mkdir -p $bindir","download=$(perl $tmpdir/download.pl $url $tmpdir)","tar -C $tmpdir -xf $download","rm $download","cp -rf $tmpdir/sratoolkit.*/bin/* $bindir/.","rm -r $tmpdir/sratoolkit.*"],"https://moirai2.github.io/schema/daemon/script":[{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/download.pl","https://moirai2.github.io/schema/daemon/script/code":["use LWP::UserAgent;","use HTTP::Request;","use File::Basename;","my $url=shift(@ARGV);","my $outdir=shift(@ARGV);","my $agent=new LWP::UserAgent();","$agent->agent('download.pl/1.0');","$agent->timeout(10);","$agent->env_proxy;","my $request=HTTP::Request->new(GET=>$url);","my $filename=\"$outdir/\".basename($url);","my $res=$agent->request($request);","if($res->is_success){","open(OUT,\">$filename\");","print OUT $res->content;","close(OUT);","print \"$filename\\n\";","}elsif(","$res->is_error){","exit(1);","}"]},{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/url.pl","https://moirai2.github.io/schema/daemon/script/code":["my $os=`uname -a`;","my $suffix=\"tar.gz\";","if($os=~/Darwin/){$os=\"mac64\";}","elsif($os=~/Windows/){$os=\"win64\";$suffix=\"zip\"}","elsif($os=~/Ubuntu/){$os=\"ubuntu64\";}","else{$os=\"centos_linux64\";}","print \"http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.9.6-1/sratoolkit.2.9.6-1-$os.$suffix\\n\";"]}],"https://moirai2.github.io/schema/daemon/output":["$log"]}
