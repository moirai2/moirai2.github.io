{"https://moirai2.github.io/schema/daemon/select":["$fastq1->https://moirai2.github.io/schema/daemon/execute->$nodeid","$nodeid->https://moirai2.github.io/schema/daemon/command->$this","$nodeid->$this#read2->$fastq2","$nodeid->$this#reference->$reference"],"https://moirai2.github.io/schema/daemon/bash":["perl $tmpdir/edit.pl $fastq1 $fastq2 $tmpdir/read1.fq $tmpdir/read2.fq","filtered1=\"$tmpdir/filtered1.fq.gz\"","filtered2=\"$tmpdir/filtered2.fq.gz\"","log=\"$tmpdir/log.txt\"","artifact1=\"$tmpdir/artifact1.fq.gz\"","artifact2=\"$tmpdir/artifact2.fq.gz\"","tagdust2 -1 R:N -o $tmpdir/tmp -ref $reference $tmpdir/read1.fq $tmpdir/read2.fq","mv $tmpdir/$stderrfile $log","cat $tmpdir/tmp_un_READ1.fq | gzip -c > $artifact1","cat $tmpdir/tmp_un_READ2.fq | gzip -c > $artifact2","cat $tmpdir/tmp_READ1.fq | gzip -c > $filtered1","cat $tmpdir/tmp_READ2.fq | gzip -c > $filtered2","rm $tmpdir/read1.fq","rm $tmpdir/read2.fq","rm $tmpdir/tmp_logfile.txt","rm $tmpdir/tmp_un_READ1.fq","rm $tmpdir/tmp_un_READ2.fq","rm $tmpdir/tmp_READ1.fq","rm $tmpdir/tmp_READ2.fq"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/edit.pl","https://moirai2.github.io/schema/daemon/script/code":["my $reader1=openRead($ARGV[0]);","my $reader2=openRead($ARGV[1]);","my $writer1=openWrite($ARGV[2]);","my $writer2=openWrite($ARGV[3]);","while(!eof($reader1)){","my ($id1,$seq1,$di1,$qual1)=readfastq($reader1);","my ($id2,$seq2,$di2,$qual2)=readfastq($reader2);","print $writer1 \"$id1\\n$seq1\\n$di1\\n$qual1\\n\";","print $writer2 \"$id1\\n$seq2\\n$di1\\n$qual2\\n\";","}","close($reader1);","close($reader2);","close($writer1);","close($writer2);","sub openRead{","my $file=shift();","my $command=$file;","if($file=~/\\.bz2$/){$command=\"bzip2 -cd $file|\";}","if($file=~/\\.gz$/){$command=\"gzip -cd $file|\";}","open(my $reader,$command);","return $reader;","}","sub openWrite{","my $file=shift();","my $command=\">$file\";","if($file=~/\\.bz2$/){$command=\"|bzip2 > $file\";}","if($file=~/\\.gz$/){$command=\"|gzip > $file\";}","open(my $writer,$command);","return $writer;","}","sub readfastq{","my $reader=shift();","my $seqid=<$reader>;","chomp($seqid);","my $seqline=<$reader>;","chomp($seqline);","my $qualid=<$reader>;","chomp($qualid);","my $qualline=<$reader>;","chomp($qualline);","return ($seqid,$seqline,$qualid,$qualline);","}"]},"https://moirai2.github.io/schema/daemon/output":["$filtered1","$filtered2","$log","$artifact1","$artifact2"]}
