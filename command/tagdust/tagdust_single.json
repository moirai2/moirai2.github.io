{"https://moirai2.github.io/schema/daemon/select":["$input->https://moirai2.github.io/schema/daemon/execute->$nodeid","$nodeid->https://moirai2.github.io/schema/daemon/command->$this","$nodeid->$this#reference->$reference"],"https://moirai2.github.io/schema/daemon/bash":["perl $tmpdir/sort.pl $input > $tmpdir/read.fq","filtered=\"$tmpdir/filtered.fq.gz\"","log=\"$tmpdir/log.txt\"","artifact=\"$tmpdir/artifact.fq.gz\"","tagdust2 -1 R:N -o $tmpdir/tmp -ref $reference $tmpdir/read.fq","mv $tmpdir/$stderrfile $log","cat $tmpdir/tmp_un.fq | gzip -c > $artifact","cat $tmpdir/tmp.fq | gzip -c > $filtered","rm -f $tmpdir/read.fq","rm $tmpdir/tmp_un.fq","rm $tmpdir/tmp.fq","rm $tmpdir/tmp_logfile.txt"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/sort.pl","https://moirai2.github.io/schema/daemon/script/code":["use File::Temp qw/ tempfile tempdir /; ", "my $dir=tempdir(CLEANUP=>1);", "my ($fh,$temp)=tempfile(DIR=>$dir);","my $file=$ARGV[0];","my $command=\"$file\";","if($file=~/\\.bz2$/){$command=\"bzip2 -cd $file|\"}","if($file=~/\\.gz$/){$command=\"gzip -cd $file|\"}","open(IN,$command);" "while(!eof(IN)){", "my $seqid=<IN>;", "chomp($seqid);", "my $seqline=<IN>;", "chomp($seqline);", "my $qualid=<IN>;", "chomp($qualid);", "my $qualline=<IN>;", "chomp($qualline);", "print $fh \"$seqid\\t|\\t$seqline\\t|\\t$qualid\\t|\\t$qualline\\n\";", "}", "close($fh);", "my ($fh2,$sort)=tempfile(DIR=>$dir);", "close($fh2);", "system(\"sort $temp > $sort\");", "open(IN,$sort);", "while(<IN>){", "my @tokens=split(/\\t\|\\t/);", "print join(\"\\n\",@tokens);", "}", "close(IN);"]},"https://moirai2.github.io/schema/daemon/output":["$filtered","$log","$artifact"]}
