{"https://moirai2.github.io/schema/daemon/input":["$starbin","$reference"],"https://moirai2.github.io/schema/daemon/bash":["outdir=\"$workdir/index\"","log=$workdir/Log.out","mkdir -p $outdir","stdout=$workdir/stdout.txt","stderr=$workdir/stderr.txt","bases=$(perl $workdir/minlength.pl<$reference)","$starbin --genomeSAindexNbases $bases --runMode genomeGenerate --outFileNamePrefix $workdir/ --genomeDir $outdir --genomeFastaFiles $reference > $stdout 2> $stderr"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"$workdir/minlength.pl","https://moirai2.github.io/schema/daemon/script/code":["use POSIX qw(floor ceil);","my $minlength;","my $length=0;","while(<STDIN>){","chomp;","if(/^>/){","if($length==0){}","elsif(!defined($minlength)){$minlength=$length;}","elsif($length<$minlength){$minlength=$length;}","$length=0;","}else{$length+=length($_);}","}","if(!defined($minlength)){$minlength=$length;}","my $bases=log($minlength)/log(2)/2-1;","if($bases>14){$bases=14;}","print ceil($bases).\"\\n\";"]},"https://moirai2.github.io/schema/daemon/output":["$outdir","$stdout","$stderr","$log"]}
