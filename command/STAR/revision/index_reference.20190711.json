{"https://moirai2.github.io/schema/daemon/input":["$starbin","$reference"],"https://moirai2.github.io/schema/daemon/bash":["outdir=\"$tmpdir/index\"","log=$tmpdir/Log.out","mkdir -p $outdir","stdout=$tmpdir/stdout.txt","stderr=$tmpdir/stderr.txt","bases=$($tmpdir/minlength.pl<$reference)","$starbin --genomeSAindexNbases $bases --runMode genomeGenerate --outFileNamePrefix $tmpdir/ --genomeDir $outdir --genomeFastaFiles $reference > $stdout 2> $stderr"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/minlength.pl","https://moirai2.github.io/schema/daemon/script/code":["use POSIX qw(floor ceil);","my $minlength;","my $length=0;","while(<STDIN>){","chomp;","if(/^>/){","if($length==0){}","elsif(!defined($minlength)){$minlength=$length;}","elsif($length<$minlength){$minlength=$length;}","$length=0;","}else{$length+=length($_);}","}","if(!defined($minlength)){$minlength=$length;}","my $bases=log($minlength)/log(2)/2-1;","if($bases>14){$bases=14;}","print ceil($bases).\"\\\\n\";"]},"https://moirai2.github.io/schema/daemon/output":["$outdir","$stdout","$stderr","$log"]}
