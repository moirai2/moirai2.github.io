{"https://moirai2.github.io/schema/daemon/input":["$input","$number","$basename","$suffix"],"https://moirai2.github.io/schema/daemon/bash":["perl $tmpdir/split.pl $tmpdir/out $number $basename $suffix < $input","output=($(ls $tmpdir/out/$basename*.$suffix))"],"https://moirai2.github.io/schema/daemon/script":{"https://moirai2.github.io/schema/daemon/script/name":"$tmpdir/split.pl","https://moirai2.github.io/schema/daemon/script/code":["use strict 'vars';","use IO::File;","my $outdir=$ARGV[0];","my $number=$ARGV[1];","my $basename=$ARGV[2];","my $suffix=$ARGV[2];","if(!defined($outdir)){$outdir=\"out\";}","if(!defined($number)){$number=1;}","if(!defined($basename)){$basename=\"tmp\";}","if(!defined($suffix)){$suffix=\"sh\";}","mkdir($outdir);","my $fileindex=0;","my $count=0;","my $writer;","while(<STDIN>){","if($count>$number-1||!defined($writer)){","if(defined($writer)){close($writer);}","$writer=IO::File->new(\">$outdir/$basename$fileindex.$suffix\");","$fileindex++;","$count=0;","}","print $writer $_;","$count++;","}","if(defined($writer)){close($writer);}"]},"https://moirai2.github.io/schema/daemon/outputs":"$output"}
