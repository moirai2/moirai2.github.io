{"http://localhost/~ah3q/schema/daemon/select":["$runinfo->http://localhost/~ah3q/schema/daemon/execute->$nodeid","$nodeid->http://localhost/~ah3q/schema/daemon/command->$this"],"http://localhost/~ah3q/schema/daemon/bash":["output=$tmpdir/output.txt","perl $tmpdir/script.pl < $runinfo > $output"],"http://localhost/~ah3q/schema/daemon/script":{"http://localhost/~ah3q/schema/daemon/script/name":"$tmpdir/script.pl","http://localhost/~ah3q/schema/daemon/script/code":["my $runindex=-1;","my $studyindex=-1;","my $line=<STDIN>;","chomp($line);","my @labels=splitline($line);","for(my $i=0;$i<scalar(@labels);$i++){if($labels[$i] eq \"SRAStudy\"){$studyindex=$i;}elsif($labels[$i] eq \"Run\"){$runindex=$i;}}","if($runindex<0){exit(1);}","if($studyindex<0){exit(1);}","while(<STDIN>){","chomp;","if($line eq $_){next;}","my @tokens=splitline($_);","my $runid=$tokens[$runindex];","if($runid eq \"\"){next;}","my $submissionid=$tokens[$studyindex];","print \"$submissionid\tRun\t$runid\n\";","for(my $i=0;$i<scalar(@tokens);$i++){","if($i==$runindex){next;}","if($i==$studyindex){next;}","my $label=$labels[$i];","my $token=$tokens[$i];","if($token ne \"\"){print \"$runid\t$label\t$token\n\";}","}","}","sub splitline{","my $line=shift();","my @chars=split(//,$line);","my @tokens=();","my $token=\"\";","my $escape=0;","my $previsesc=0;","foreach my $c(@chars){","if($c eq \",\" && $escape==0){","push(@tokens,$token);","$token=\"\";","}elsif($c eq \"\\"\"){","if($escape==0){$escape=1;}","else{$escape=0;}","}else{","$token.=$c;","}","}","return @tokens;","}"]},"http://localhost/~ah3q/schema/daemon/output":"$output"}
